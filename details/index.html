<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>remco details - Remco Docs</title>
    <meta name="generator" content="Hugo 0.17" />

    
    <meta name="description" content="remco is a lightweight configuration management tool">
    
    <link rel="canonical" href="https://heavyhorst.github.io/remco/details/">
    
    <meta name="author" content="The remco authors">
    

    <meta property="og:url" content="https://heavyhorst.github.io/remco/details/">
    <meta property="og:title" content="Remco Docs">
    <meta property="og:image" content="https://heavyhorst.github.io/remco/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Remco Docs">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="https://heavyhorst.github.io/remco/images/favicon.ico">
    <link rel="icon" type="image/x-icon" href="https://heavyhorst.github.io/remco/images/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('https://heavyhorst.github.io/remco/fonts/icon.eot?52m981');
        src: url('https://heavyhorst.github.io/remco/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
             url('https://heavyhorst.github.io/remco/fonts/icon.woff?52m981')
               format('woff'),
             url('https://heavyhorst.github.io/remco/fonts/icon.ttf?52m981')
               format('truetype'),
             url('https://heavyhorst.github.io/remco/fonts/icon.svg?52m981#icon')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="https://heavyhorst.github.io/remco/stylesheets/application.css">
    <link rel="stylesheet" href="https://heavyhorst.github.io/remco/stylesheets/temporary.css">
    <link rel="stylesheet" href="https://heavyhorst.github.io/remco/stylesheets/palettes.css">
    <link rel="stylesheet" href="https://heavyhorst.github.io/remco/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu&#43;Mono">
    <style>
      body, input {
        font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <script src="https://heavyhorst.github.io/remco/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-teal palette-accent-green">



	
	


<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        remco details
      </div>
    </div>

    

    
    <div class="button button-github" role="button" aria-label="GitHub">
      <a href="https://github.com/heavyhorst" title="@heavyhorst on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
    </div>
    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="https://github.com/HeavyHorst/remco" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="https://heavyhorst.github.io/remco/images/logo.png">
        </div>
      
      <div class="name">
        <strong>Remco Docs <span class="version">v0.8.0</span></strong>
        
          <br>
          HeavyHorst/remco
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            <a href="https://github.com/HeavyHorst/remco/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/HeavyHorst/remco/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      

      <div class="toc">
        
        <ul>
          




<li>
  
    



<a class="current" title="Details" href="https://heavyhorst.github.io/remco/details/">
	
	Details
</a>


<ul id="scrollspy">
</ul>


  
</li>



<li>
  
    



<a  title="Configuring remco" href="https://heavyhorst.github.io/remco/config/">
	
	Configuring remco
</a>



  
</li>



<li>
  
    



<a  title="Sample configuration" href="https://heavyhorst.github.io/remco/config/sample">
	
	Sample configuration
</a>



  
</li>



<li>
  
    



<a  title="Sample resource configuration" href="https://heavyhorst.github.io/remco/config/sampleresource">
	
	Sample resource configuration
</a>



  
</li>



<li>
  
    



<a  title="Template" href="https://heavyhorst.github.io/remco/template/">
	
	Template
</a>



  
</li>



<li>
  
    



<a  title="Plugins Example" href="https://heavyhorst.github.io/remco/plugins/">
	
	Plugins Example
</a>



  
</li>



<li>
  
    



<a  title="License" href="https://heavyhorst.github.io/remco/license/">
	
	License
</a>



  
</li>


        </ul>
        

        
        <hr>
        <span class="section">The author</span>
        
        <ul>
          

          
          <li>
            <a href="https://github.com/heavyhorst" target="_blank" title="@heavyhorst on GitHub">
              @heavyhorst on GitHub
            </a>
          </li>
          

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>remco details </h1>

			

<h2 id="template-resource">Template resource</h2>

<p>A template resource in remco consists of the following parts:</p>

<ul>
<li><strong>one optional exec command.</strong></li>
<li><strong>one or many templates.</strong></li>
<li><strong>one or many backends.</strong>
<br /></li>
</ul>

<p>Please note that it is not possible to use the same backend more than once per template resource.
It is for example not possible to use two different redis servers.</p>

<h2 id="exec-mode">Exec mode</h2>

<p>Remco has the ability to run one arbitary child process per template resource.
When any of the provided templates change and the check command (if any) succeeds, remco will send the configurable reload signal to the child process.
Remco will kill and restart the child process if no reload signal is provided.
Additionally, every signal that remco receives will be forwarded to the child process.</p>

<p>The template resource will fail if the child process dies. It will be automatically restarted after a random amount of time (0-30s).
This also means that the child needs to remain in the foreground, otherwise the template resource will be restarted endlessly.</p>

<p>The exec configuration parameters can be found here: <a href="../config/#exec-configuration-options">exec configuration</a>.</p>

<h2 id="commands-reload-check">Commands (reload &amp; check)</h2>

<p>Each template can have its own reload and check command. Both commands are executed in a sh-shell which means that operations like environment variable substitution or pipes should work correctly.</p>

<p>In the check command its additionally possible to reference to the rendered source template with {{ .src }}.</p>

<p>The check command must exit with status code 0 so that:</p>

<ul>
<li>the reload command runs</li>
<li>the child process gets reloaded</li>
</ul>

<p>The template configuration parameters can be found here: <a href="../config/#template-configuration-options">template configuration</a>.</p>

<h2 id="zombie-reaping-pid-1">Zombie reaping (pid 1)</h2>

<p>See: <a href="https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/">https://blog.phusion.nl/2015/01/20/docker-and-the-pid-1-zombie-reaping-problem/</a></p>

<p>If Remco detects that it runs as pid 1 (for example in a Docker container) it will automatically reap zombie processes.
No additional init system is needed.</p>

<h2 id="backends">Backends</h2>

<p>Remco can fetch configuration data from a bunch of different kv-stores.
Some backends can be configured to watch for changes in the store to immediately react to these changes.
The other way is to provide a backend polling interval.
These two modes are not mutual exclusive, you can watch for changes and run the interval processor as a reconcilation loop.</p>

<p>Every Backend needs to implement the <a href="https://github.com/HeavyHorst/easyKV">easyKV</a> interface.
This is also the repository where the current implementations live.</p>

<p>Currently supported are:</p>

<ul>
<li><strong>etcd 2 and 3</strong> (interval and watch)</li>
<li><strong>consul</strong> (interval and watch)</li>
<li><strong>zookeeper</strong> (interval and watch)</li>
<li><strong>redis</strong> (only interval)</li>
<li><strong>vault</strong> (only interval)</li>
<li><strong>environment</strong> (only interval)</li>
<li><strong>yaml/json files</strong> (interval and watch)</li>
</ul>

<p>The different coniguration parameters can be found here: <a href="../config/#backend-configuration-options">backend configuration</a>.</p>

<h2 id="plugins">Plugins</h2>

<p>Remco supports backends as plugins.
There is no requirement that plugins be written in Go.
Every language that can provide a JSON-RPC API is ok.</p>

<p>Example: <a href="../plugins/">env plugin</a>.</p>

<h2 id="running-and-process-lifecycle">Running and Process Lifecycle</h2>

<p>Remcos lifecycle can be controlled with several syscalls.</p>

<ul>
<li>os.Interrupt(SIGINT on linux) and SIGTERM: remco will gracefully shut down</li>
<li>SIGHUP: remco will reload all configuration files.</li>
</ul>


			<aside class="copyright" role="note">
				
				&copy; 2016 Released under the MIT license &ndash;
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="https://heavyhorst.github.io/remco/plugins/" title="plugins">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              plugins
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = 'https:\/\/heavyhorst.github.io\/remco\/';
      var repo_id  = 'HeavyHorst\/remco';
    
    </script>

    <script src="https://heavyhorst.github.io/remco/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;
            
            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }
        

        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "#";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//gohugo.io/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
